{"ast":null,"code":"var _jsxFileName = \"/media/shafaet/F/moodle2/CSE408Project/frontend/src/courses/pages/CourseMaterialUpload.js\";\nimport React, { useState, useContext } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\nimport Input from \"../../shared/components/FormElements/Input\";\nimport Button from \"../../shared/components/FormElements/Button\";\nimport FileUpload from \"../../shared/components/FormElements/FileUpload\";\nimport { VALIDATOR_REQUIRE, VALIDATOR_MINLENGTH } from \"../../shared/util/validators\";\nimport { useForm } from \"../../shared/hooks/form-hook\";\nimport \"./CourseForm.css\";\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../../shared/context/auth-context\";\n\nconst CourseMaterialUpload = () => {\n  const auth = useContext(AuthContext);\n  const {\n    isLoading,\n    error,\n    sendRequest,\n    clearError\n  } = useHttpClient();\n  const courseID = useParams().courseID;\n  const [formState, inputHandler] = useForm({\n    file: {\n      value: null,\n      isValid: false\n    }\n  }, false);\n  const history = useHistory();\n\n  const courseMatrialUploadHandler = async event => {\n    event.preventDefault();\n\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", formState.inputs.file.value);\n      formData.append(\"course\", courseID); // formData.append(\"uploader\", 123);\n\n      console.log(formData);\n      await sendRequest(`http://localhost:5000/api/courses/upload-course-materials/${courseID}`, \"POST\", formData, {\n        Authorization: \"Bearer \" + auth.token\n      });\n      history.push(\"/\");\n    } catch (error) {}\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ErrorModal, {\n    error: error,\n    onClear: clearError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"form\", {\n    className: \"course-form\",\n    onSubmit: courseMatrialUploadHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, \" \", isLoading && /*#__PURE__*/React.createElement(LoadingSpinner, {\n    asOverlay: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 23\n    }\n  }), \" \", /*#__PURE__*/React.createElement(FileUpload, {\n    center: true,\n    id: \"file\",\n    onInput: inputHandler,\n    errorText: \"Please provide a file\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }), \" \", \" \", /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    disabled: !formState.isValid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, \"ADD COURSE MATERIAL\", \" \"), \" \"), \" \");\n};\n\nexport default CourseMaterialUpload;","map":{"version":3,"names":["React","useState","useContext","useHistory","useParams","useHttpClient","Input","Button","FileUpload","VALIDATOR_REQUIRE","VALIDATOR_MINLENGTH","useForm","ErrorModal","LoadingSpinner","axios","AuthContext","CourseMaterialUpload","auth","isLoading","error","sendRequest","clearError","courseID","formState","inputHandler","file","value","isValid","history","courseMatrialUploadHandler","event","preventDefault","formData","FormData","append","inputs","console","log","Authorization","token","push"],"sources":["/media/shafaet/F/moodle2/CSE408Project/frontend/src/courses/pages/CourseMaterialUpload.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\nimport Input from \"../../shared/components/FormElements/Input\";\nimport Button from \"../../shared/components/FormElements/Button\";\nimport FileUpload from \"../../shared/components/FormElements/FileUpload\";\nimport {\n  VALIDATOR_REQUIRE,\n  VALIDATOR_MINLENGTH,\n} from \"../../shared/util/validators\";\nimport { useForm } from \"../../shared/hooks/form-hook\";\nimport \"./CourseForm.css\";\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../../shared/context/auth-context\";\n\nconst CourseMaterialUpload = () => {\n  const auth = useContext(AuthContext);\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n  const courseID = useParams().courseID;\n\n  const [formState, inputHandler] = useForm(\n    {\n      file: {\n        value: null,\n        isValid: false,\n      },\n    },\n    false\n  );\n\n  const history = useHistory();\n\n  const courseMatrialUploadHandler = async (event) => {\n    event.preventDefault();\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", formState.inputs.file.value);\n      formData.append(\"course\", courseID);\n      // formData.append(\"uploader\", 123);\n      console.log(formData);\n      await sendRequest(\n        `http://localhost:5000/api/courses/upload-course-materials/${courseID}`,\n        \"POST\",\n        formData,\n        {\n          Authorization: \"Bearer \" + auth.token,\n        }\n      );\n      history.push(\"/\");\n    } catch (error) {}\n  };\n\n  return (\n    <React.Fragment>\n      <ErrorModal error={error} onClear={clearError} />{\" \"}\n      <form className=\"course-form\" onSubmit={courseMatrialUploadHandler}>\n        {\" \"}\n        {isLoading && <LoadingSpinner asOverlay />}{\" \"}\n        <FileUpload\n          center\n          id=\"file\"\n          onInput={inputHandler}\n          errorText=\"Please provide a file\"\n        />{\" \"}\n        {}{\" \"}\n        <Button type=\"submit\" disabled={!formState.isValid}>\n          ADD COURSE MATERIAL{\" \"}\n        </Button>{\" \"}\n      </form>{\" \"}\n    </React.Fragment>\n  );\n};\n\nexport default CourseMaterialUpload;\n"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,QAA4C,OAA5C;AACA,SAASC,UAAT,EAAqBC,SAArB,QAAsC,kBAAtC;AACA,SAASC,aAAT,QAA8B,8BAA9B;AACA,OAAOC,KAAP,MAAkB,4CAAlB;AACA,OAAOC,MAAP,MAAmB,6CAAnB;AACA,OAAOC,UAAP,MAAuB,iDAAvB;AACA,SACEC,iBADF,EAEEC,mBAFF,QAGO,8BAHP;AAIA,SAASC,OAAT,QAAwB,8BAAxB;AACA,OAAO,kBAAP;AACA,OAAOC,UAAP,MAAuB,+CAAvB;AACA,OAAOC,cAAP,MAA2B,mDAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,mCAA5B;;AAEA,MAAMC,oBAAoB,GAAG,MAAM;EACjC,MAAMC,IAAI,GAAGf,UAAU,CAACa,WAAD,CAAvB;EACA,MAAM;IAAEG,SAAF;IAAaC,KAAb;IAAoBC,WAApB;IAAiCC;EAAjC,IAAgDhB,aAAa,EAAnE;EACA,MAAMiB,QAAQ,GAAGlB,SAAS,GAAGkB,QAA7B;EAEA,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4Bb,OAAO,CACvC;IACEc,IAAI,EAAE;MACJC,KAAK,EAAE,IADH;MAEJC,OAAO,EAAE;IAFL;EADR,CADuC,EAOvC,KAPuC,CAAzC;EAUA,MAAMC,OAAO,GAAGzB,UAAU,EAA1B;;EAEA,MAAM0B,0BAA0B,GAAG,MAAOC,KAAP,IAAiB;IAClDA,KAAK,CAACC,cAAN;;IACA,IAAI;MACF,MAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;MACAD,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBX,SAAS,CAACY,MAAV,CAAiBV,IAAjB,CAAsBC,KAA9C;MACAM,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0BZ,QAA1B,EAHE,CAIF;;MACAc,OAAO,CAACC,GAAR,CAAYL,QAAZ;MACA,MAAMZ,WAAW,CACd,6DAA4DE,QAAS,EADvD,EAEf,MAFe,EAGfU,QAHe,EAIf;QACEM,aAAa,EAAE,YAAYrB,IAAI,CAACsB;MADlC,CAJe,CAAjB;MAQAX,OAAO,CAACY,IAAR,CAAa,GAAb;IACD,CAfD,CAeE,OAAOrB,KAAP,EAAc,CAAE;EACnB,CAlBD;;EAoBA,oBACE,oBAAC,KAAD,CAAO,QAAP;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,UAAD;IAAY,KAAK,EAAEA,KAAnB;IAA0B,OAAO,EAAEE,UAAnC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADF,EACoD,GADpD,eAEE;IAAM,SAAS,EAAC,aAAhB;IAA8B,QAAQ,EAAEQ,0BAAxC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACG,GADH,EAEGX,SAAS,iBAAI,oBAAC,cAAD;IAAgB,SAAS,MAAzB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFhB,EAE8C,GAF9C,eAGE,oBAAC,UAAD;IACE,MAAM,MADR;IAEE,EAAE,EAAC,MAFL;IAGE,OAAO,EAAEM,YAHX;IAIE,SAAS,EAAC,uBAJZ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAHF,EAQK,GARL,EASK,GATL,eAUE,oBAAC,MAAD;IAAQ,IAAI,EAAC,QAAb;IAAsB,QAAQ,EAAE,CAACD,SAAS,CAACI,OAA3C;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,0BACsB,GADtB,CAVF,EAYY,GAZZ,CAFF,EAeU,GAfV,CADF;AAmBD,CAxDD;;AA0DA,eAAeX,oBAAf"},"metadata":{},"sourceType":"module"}
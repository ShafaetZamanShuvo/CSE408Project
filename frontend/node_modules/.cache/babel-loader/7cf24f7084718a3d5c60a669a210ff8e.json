{"ast":null,"code":"var _jsxFileName = \"/home/istiak/Desktop/Project 408/Final/CSE408Project/frontend/src/courses/pages/DeleteCourse.js\";\nimport React, { useEffect, useState } from \"react\";\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\nimport Input from \"../../shared/components/FormElements/Input\";\nimport Button from \"../../shared/components/FormElements/Button\";\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\nimport DropDownSelect from \"../../shared/components/FormElements/DropDownSelect\";\nimport { useHistory } from \"react-router-dom\";\nimport { VALIDATOR_REQUIRE, VALIDATOR_MINLENGTH } from \"../../shared/util/validators\";\nimport { useForm } from \"../../shared/hooks/form-hook\";\nimport \"./DeleteCourse.css\";\nlet selectCourses;\nlet selectSession;\n\nconst DeleteCourse = () => {\n  const {\n    isLoading,\n    error,\n    sendRequest,\n    clearError\n  } = useHttpClient();\n  const [loadedCourses, setLoadedCourses] = useState();\n  const {\n    isSessionLoading,\n    errorSession,\n    sendSessionRequest,\n    clearSessionError\n  } = useHttpClient();\n  const [loadedSessions, setLoadedSessions] = useState();\n  const history = useHistory(); // {!isLoading && loadedCourses && <CourseList items={loadedCourses} />}\n\n  useEffect(() => {\n    const fetchSession = async () => {\n      try {\n        const responseData = await sendRequest(\"http://localhost:5000/api/admin/get/sessions\");\n        selectSession = responseData.sessions.map(ssn => ({\n          value: ssn._id,\n          label: ssn.sessionID\n        }));\n        console.log(\"rana\", selectSession);\n        setLoadedSessions(responseData.sessions);\n      } catch (err) {}\n    };\n\n    fetchSession();\n  }, [sendRequest]); // useEffect(() => {\n  //   const fetchCourses = async () => {\n  //     if (isSessionLoading && loadedSessions) {\n  //       try {\n  //         const responseData = await sendRequest(\n  //           `http://localhost:5000/api/courses/get/courses/${loadedSessions.sessionID}`\n  //         );\n  //         selectCourses = responseData.courses.map((crs) => ({\n  //           value: crs._id,\n  //           label: crs.courseID,\n  //         }));\n  //         console.log(selectCourses);\n  //         setLoadedCourses(responseData.courses);\n  //       } catch (err) {}\n  //     }\n  //   };\n  //   fetchCourses();\n  // }, [sendRequest]);\n\n  const [formState, inputHandler] = useForm({\n    session_id: {\n      value: \"\",\n      isValid: false\n    },\n    course_id: {\n      value: \"\",\n      isValid: false\n    }\n  }, false);\n\n  const courseSubmitHandler = async event => {\n    event.preventDefault();\n\n    try {\n      await sendRequest(`http://localhost:5000/api/admin/delete/course/${formState.inputs.course_id.value}`, \"DELETE\");\n      history.push(\"/\");\n    } catch (error) {} // console.log(formState.inputs); // send this to the backend!\n\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    className: \"course-form\",\n    onSubmit: courseSubmitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(DropDownSelect, {\n    id: \"session_id\",\n    label: \"Session ID\",\n    validators: [VALIDATOR_REQUIRE()],\n    errorText: \"Please enter a valid session id.\",\n    onInput: inputHandler,\n    options: selectSession,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }), !isLoading && loadedCourses && /*#__PURE__*/React.createElement(DropDownSelect, {\n    id: \"course_id\",\n    label: \"Course ID\",\n    validators: [VALIDATOR_REQUIRE()],\n    errorText: \"Please enter a valid course id.\",\n    onInput: inputHandler,\n    options: selectCourses,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    disabled: !formState.isValid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, \"DELETE COURSE\"));\n};\n\nexport default DeleteCourse;","map":{"version":3,"names":["React","useEffect","useState","ErrorModal","LoadingSpinner","Input","Button","useHttpClient","DropDownSelect","useHistory","VALIDATOR_REQUIRE","VALIDATOR_MINLENGTH","useForm","selectCourses","selectSession","DeleteCourse","isLoading","error","sendRequest","clearError","loadedCourses","setLoadedCourses","isSessionLoading","errorSession","sendSessionRequest","clearSessionError","loadedSessions","setLoadedSessions","history","fetchSession","responseData","sessions","map","ssn","value","_id","label","sessionID","console","log","err","formState","inputHandler","session_id","isValid","course_id","courseSubmitHandler","event","preventDefault","inputs","push"],"sources":["/home/istiak/Desktop/Project 408/Final/CSE408Project/frontend/src/courses/pages/DeleteCourse.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\nimport Input from \"../../shared/components/FormElements/Input\";\nimport Button from \"../../shared/components/FormElements/Button\";\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\nimport DropDownSelect from \"../../shared/components/FormElements/DropDownSelect\";\nimport { useHistory } from \"react-router-dom\";\nimport {\n  VALIDATOR_REQUIRE,\n  VALIDATOR_MINLENGTH,\n} from \"../../shared/util/validators\";\nimport { useForm } from \"../../shared/hooks/form-hook\";\nimport \"./DeleteCourse.css\";\n\nlet selectCourses;\nlet selectSession;\n\nconst DeleteCourse = () => {\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n  const [loadedCourses, setLoadedCourses] = useState();\n  const {\n    isSessionLoading,\n    errorSession,\n    sendSessionRequest,\n    clearSessionError,\n  } = useHttpClient();\n  const [loadedSessions, setLoadedSessions] = useState();\n  const history = useHistory();\n  // {!isLoading && loadedCourses && <CourseList items={loadedCourses} />}\n\n  useEffect(() => {\n    const fetchSession = async () => {\n      try {\n        const responseData = await sendRequest(\n          \"http://localhost:5000/api/admin/get/sessions\"\n        );\n        selectSession = responseData.sessions.map((ssn) => ({\n          value: ssn._id,\n          label: ssn.sessionID,\n        }));\n        console.log(\"rana\", selectSession);\n        setLoadedSessions(responseData.sessions);\n      } catch (err) {}\n    };\n    fetchSession();\n  }, [sendRequest]);\n\n  // useEffect(() => {\n  //   const fetchCourses = async () => {\n  //     if (isSessionLoading && loadedSessions) {\n  //       try {\n  //         const responseData = await sendRequest(\n  //           `http://localhost:5000/api/courses/get/courses/${loadedSessions.sessionID}`\n  //         );\n  //         selectCourses = responseData.courses.map((crs) => ({\n  //           value: crs._id,\n  //           label: crs.courseID,\n  //         }));\n  //         console.log(selectCourses);\n  //         setLoadedCourses(responseData.courses);\n  //       } catch (err) {}\n  //     }\n  //   };\n  //   fetchCourses();\n  // }, [sendRequest]);\n\n  const [formState, inputHandler] = useForm(\n    {\n      session_id: {\n        value: \"\",\n        isValid: false,\n      },\n      course_id: {\n        value: \"\",\n        isValid: false,\n      },\n    },\n    false\n  );\n\n  const courseSubmitHandler = async (event) => {\n    event.preventDefault();\n    try {\n      await sendRequest(\n        `http://localhost:5000/api/admin/delete/course/${formState.inputs.course_id.value}`,\n        \"DELETE\"\n      );\n      history.push(\"/\");\n    } catch (error) {}\n    // console.log(formState.inputs); // send this to the backend!\n  };\n\n  return (\n    <form className=\"course-form\" onSubmit={courseSubmitHandler}>\n      {/* {!isSessionLoading && loadedSessions && ( */}\n      <DropDownSelect\n        id=\"session_id\"\n        label=\"Session ID\"\n        validators={[VALIDATOR_REQUIRE()]}\n        errorText=\"Please enter a valid session id.\"\n        onInput={inputHandler}\n        options={selectSession}\n      />\n      {/* )} */}\n\n      {!isLoading && loadedCourses && (\n        <DropDownSelect\n          id=\"course_id\"\n          label=\"Course ID\"\n          validators={[VALIDATOR_REQUIRE()]}\n          errorText=\"Please enter a valid course id.\"\n          onInput={inputHandler}\n          options={selectCourses}\n        />\n      )}\n\n      <Button type=\"submit\" disabled={!formState.isValid}>\n        DELETE COURSE\n      </Button>\n    </form>\n  );\n};\n\nexport default DeleteCourse;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}